/*! For license information please see chat.bundle.js.LICENSE.txt */
!function(e,r){"object"===typeof exports&&"object"===typeof module?module.exports=r(require("MaterialIcons"),require("MaterialUI"),require("React"),require("ReactDOM")):"function"===typeof define&&define.amd?define(["MaterialIcons","MaterialUI","React","ReactDOM"],r):"object"===typeof exports?exports.AIChatPlugin=r(require("MaterialIcons"),require("MaterialUI"),require("React"),require("ReactDOM")):e.AIChatPlugin=r(e.MaterialIcons,e.MaterialUI,e.React,e.ReactDOM)}(self,((e,r,t,o)=>(()=>{"use strict";var a={391:(e,r,t)=>{var o=t(845);r.createRoot=o.createRoot,r.hydrateRoot=o.hydrateRoot},153:(e,r,t)=>{var o=t(883),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var o,n={},c=null,d=null;for(o in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)s.call(r,o)&&!l.hasOwnProperty(o)&&(n[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===n[o]&&(n[o]=r[o]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:i.current}}r.jsx=c,r.jsxs=c},579:(e,r,t)=>{e.exports=t(153)},953:r=>{r.exports=e},627:e=>{e.exports=r},883:e=>{e.exports=t},845:e=>{e.exports=o}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var t=n[e]={exports:{}};return a[e](t,t.exports,s),t.exports}s.m=a,s.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return s.d(r,{a:r}),r},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((r,t)=>(s.f[t](e,r),r)),[])),s.u=e=>"static/js/"+e+".c8aa3f11.chunk.js",s.miniCssF=e=>{},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={},r="AIChatPlugin:";s.l=(t,o,a,n)=>{if(e[t])e[t].push(o);else{var i,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==r+a){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",r+a),i.src=t),e[t]=[o];var p=(r,o)=>{i.onerror=i.onload=null,clearTimeout(x);var a=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(o))),r)return r(o)},x=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",(()=>{var e={792:0};s.f.j=(r,t)=>{var o=s.o(e,r)?e[r]:void 0;if(0!==o)if(o)t.push(o[2]);else{var a=new Promise(((t,a)=>o=e[r]=[t,a]));t.push(o[2]=a);var n=s.p+s.u(r),i=new Error;s.l(n,(t=>{if(s.o(e,r)&&(0!==(o=e[r])&&(e[r]=void 0),o)){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;i.message="Loading chunk "+r+" failed.\n("+a+": "+n+")",i.name="ChunkLoadError",i.type=a,i.request=n,o[1](i)}}),"chunk-"+r,r)}};var r=(r,t)=>{var o,a,n=t[0],i=t[1],l=t[2],c=0;if(n.some((r=>0!==e[r]))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)l(s)}for(r&&r(t);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},t=self.webpackChunkAIChatPlugin=self.webpackChunkAIChatPlugin||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var i=s(883),l=s.n(i),c=s(391),d=s(627),u=s(953),p=s(579);const x=e=>{let{agentId:r}=e;const t=(0,d.useTheme)(),[o,a]=((0,d.useMediaQuery)(t.breakpoints.down("sm")),(0,i.useState)([])),[n,s]=(0,i.useState)(""),[l,c]=(0,i.useState)(!1),[x,f]=(0,i.useState)({open:!1,message:"",severity:"success"}),h=(0,i.useRef)(null),[m,y]=(0,i.useState)(!1),[g,v]=(0,i.useState)(""),j=(0,i.useCallback)((()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]);(0,i.useEffect)((()=>{j()}),[o,j]);const b=function(e){f({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})};return(0,p.jsxs)(d.Box,{sx:{display:"flex"},children:[(0,p.jsxs)(d.Box,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"grey.50"},children:[(0,p.jsx)(d.AppBar,{position:"static",color:"primary",children:(0,p.jsxs)(d.Toolbar,{children:[(0,p.jsx)(d.Avatar,{sx:{bgcolor:"primary.dark",mr:2},children:(0,p.jsx)(u.SmartToy,{})}),(0,p.jsx)(d.Typography,{variant:"h6",children:"Chatbot"}),(0,p.jsx)(d.Tooltip,{title:"Options",children:(0,p.jsx)(d.IconButton,{color:"inherit",children:(0,p.jsx)(u.MoreVert,{})})})]})}),(0,p.jsx)(d.Box,{sx:{flex:1,overflowY:"auto",p:3},children:(0,p.jsx)(d.Container,{maxWidth:"md",children:(0,p.jsxs)(d.Stack,{spacing:2,children:[o.map(((e,r)=>(0,p.jsxs)(d.Box,{sx:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start"},children:["assistant"===e.role&&(0,p.jsx)(d.Avatar,{sx:{bgcolor:t.palette.primary.main},children:(0,p.jsx)(u.SmartToy,{})}),(0,p.jsx)(d.Paper,{sx:{p:2,borderRadius:2,bgcolor:"user"===e.role?"primary.main":"background.paper",color:"user"===e.role?"common.white":"text.primary"},children:(0,p.jsx)(d.Typography,{variant:"body1",children:e.content})}),"user"===e.role&&(0,p.jsx)(d.Avatar,{sx:{bgcolor:"grey.300"},children:(0,p.jsx)(u.Person,{})})]},r))),m&&(0,p.jsxs)(d.Box,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,p.jsx)(d.Avatar,{sx:{bgcolor:t.palette.primary.main},children:(0,p.jsx)(u.SmartToy,{})}),(0,p.jsx)(d.Paper,{sx:{p:2,borderRadius:2},children:(0,p.jsx)(d.Typography,{children:g})})]}),(0,p.jsx)("div",{ref:h})]})})}),(0,p.jsx)(d.Paper,{component:"form",onSubmit:async e=>{if(e.preventDefault(),!n.trim())return;const t={role:"user",content:n.trim(),timestamp:(new Date).toISOString()};a((e=>[...e,t])),s(""),c(!0);try{const e=new FormData;e.append("agent_id",r),e.append("query",t.content),e.append("target_lang","en");const o=await fetch("https://phosai-dbec65d5-46be-45ae-9062.cranecloud.io/agents/conversations",{method:"POST",body:e});if(!o.ok)throw new Error("Network error");const n=await o.json(),s=await(async e=>{y(!0);let r="";for(let t of e.split(" "))r+=t+" ",v(r),await new Promise((e=>setTimeout(e,50*Math.random()+20)));return y(!1),r.trim()})(n.answer),i={role:"assistant",content:s,timestamp:(new Date).toISOString()};a((e=>[...e,i]))}catch(o){b("Error processing message","error")}finally{c(!1),v("")}},sx:{p:2},children:(0,p.jsx)(d.Container,{maxWidth:"md",children:(0,p.jsxs)(d.Box,{sx:{display:"flex",gap:2},children:[(0,p.jsx)(d.TextField,{fullWidth:!0,variant:"outlined",placeholder:"Type a message...",value:n,onChange:e=>s(e.target.value)}),(0,p.jsx)(d.IconButton,{type:"submit",disabled:!n.trim()||l,children:(0,p.jsx)(u.Send,{})})]})})})]}),(0,p.jsx)(d.Snackbar,{open:x.open,autoHideDuration:6e3,onClose:()=>f({...x,open:!1}),children:(0,p.jsx)(d.Alert,{severity:x.severity,variant:"filled",children:x.message})})]})},f=()=>(0,p.jsx)("div",{children:(0,p.jsx)(x,{agentId:"Agent_key"})}),h=e=>{e&&e instanceof Function&&s.e(453).then(s.bind(s,453)).then((r=>{let{getCLS:t,getFID:o,getFCP:a,getLCP:n,getTTFB:s}=r;t(e),o(e),a(e),n(e),s(e)}))};return c.createRoot(document.getElementById("root")).render((0,p.jsx)(l().StrictMode,{children:(0,p.jsx)(f,{})})),h(),{}})()));
//# sourceMappingURL=chat.bundle.js.map